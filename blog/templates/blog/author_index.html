{% extends "base.html" %}

{% load static wagtailcore_tags wagtailimages_tags wagtailroutablepage_tags %}

{% block body_class %}
template-blogauthorindexpage
{% endblock body_class %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/blog.css' %}">
{% endblock extra_css %}

{% block content %}
    <section class="blog-index">
        <header class="blog-hero">
            <div>
                <p class="eyebrow">Authors</p>
                <h1>Writers</h1>
                <p class="intro">Profiles of everyone publishing in the journal.</p>
            </div>
            <div class="hero-actions">
                <a class="clear-filters" href="{{ page.url }}">Back to blog</a>
            </div>
        </header>

        <div class="author-grid">
            {% for author in authors %}
                <article class="author-card">
                    <a class="author-card__link" href="{% routablepageurl page 'author_detail' author.author_slug %}">
                        {% if author.wagtail_userprofile.avatar %}
                            <img class="author-avatar author-avatar--large" src="{{ author.wagtail_userprofile.avatar.url }}" alt="{{ author.get_full_name|default:author.username }}">
                        {% endif %}
                        <h2>{{ author.get_full_name|default:author.username }}</h2>
                        {% if author.bio %}
                            <div class="author-card__bio">
                                {% for block in author.bio %}
                                    {% include_block block %}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </a>
                </article>
            {% empty %}
                <div class="empty-state">No authors yet.</div>
            {% endfor %}
        </div>
    </section>
{% endblock content %}
